<!doctype html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" href="img/thedao-icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TheDAO NFT</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/toastr.min.css">
    <style>
        .navbar {
            background-color: #5d5a57 !important;
        }

        body {
            padding-top: 110px;
            padding-bottom: 3em;
            background: rgb(234, 234, 235);
            background: linear-gradient(90deg, rgb(74 80 86) 0%, rgb(186 186 186) 97%);
        }

        #presenting {
            background: rgb(44, 111, 140);
            background: linear-gradient(90deg, rgb(1 0 63) 0%, rgba(102, 35, 121, 0.19121151878720233) 97%);
            color: white;
            padding: 1em;
            border-radius: 6px;

        }

        #sub-title {
            color: darkgrey;
        }


    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-light fixed-top bg-dark">
        <div class="container-fluid">

            <a class="navbar-brand" href="#">
                <img src="img/thedao.png" alt="" width="111" height="50"> TheDao NFT
            </a>


            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0  justify-content-end">
                    <li>
                        <a class="nav-link" href="#" id="about">
                            <h5 class="ms-auto">Total minted <span data-bs-toggle="modal" data-bs-target="#mintNftModal"
                                                                   id="nft-balance" class="badge bg-warning">0</span> /
                                1800</h5>
                        </a>
                    </li>

                </ul>
                <form class="d-flex">

                    <button class="btn btn-primary" id="connect">Connect Wallet</button>
                </form>
            </div>

        </div>

    </nav>

    <!-- Mint NFT Modal -->
    <div class="modal fade" id="mintNftModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Mint TheDao NFTs</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="mint-nfts">
                        <label>
                            Punk Number
                            <input type="text" name="punk-id">
                        </label>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" name="close" data-bs-dismiss="modal">Close</button>
                    <button type="button" name="mint-nfts" class="btn btn-primary">Claim üö¨</button>
                </div>
            </div>
        </div>
    </div>


</header>
<main>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <h1 id="sub-title">TheDaoNFT<sup>.eth</sup>Ô∏è</h1>

                <div id="presenting">
                    <h3>Welcome to the TheDAO Museum NFT project.
                        The SEC released an 18-page report on the TheDAO. Here we take this pdf, convert each page
                        to PNGs, then break each PNG in to 100 tiles. 1800 tiles are then turned to NFTs.</h3>
                    <p>Each individual NFT will require 1 DAO token to mint, which
                        gets wrapped inside the NFT. The DAO token can be unwrapped at any time by burning the NFT.</p>

                </div>

            </div>
        </div>
    </div>
</main>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="js/web3.min.js"></script>
<script src="js/js-big-decimal.min.js"></script>
<script src="js/web3modal.js"></script>
<script src="js/toastr.min.js"></script>
<script src="js/walletconnect/web3-provider.min.js"></script>
<script>

    const TheDaoNFTAddress = "0x4C4a2f8c81640e47606d3fd77B353E87Ba015584";

    const TheDaoNFTABI = [
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_theDAO",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_max",
                    "type": "uint256"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "constructor"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "approved",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "uint256",
                    "name": "tokenId",
                    "type": "uint256"
                }
            ],
            "name": "Approval",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "operator",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "bool",
                    "name": "approved",
                    "type": "bool"
                }
            ],
            "name": "ApprovalForAll",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "name": "BaseURI",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "tokenId",
                    "type": "uint256"
                }
            ],
            "name": "Burn",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "address",
                    "name": "curator",
                    "type": "address"
                }
            ],
            "name": "Curator",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "tokenId",
                    "type": "uint256"
                }
            ],
            "name": "Mint",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "tokenId",
                    "type": "uint256"
                }
            ],
            "name": "Restore",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "from",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "to",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "uint256",
                    "name": "tokenId",
                    "type": "uint256"
                }
            ],
            "name": "Transfer",
            "type": "event"
        },
        {
            "inputs": [],
            "name": "PDF_SHA_256_HASH",
            "outputs": [
                {
                    "internalType": "bytes32",
                    "name": "",
                    "type": "bytes32"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "PNG_SHA_256_HASH",
            "outputs": [
                {
                    "internalType": "bytes32",
                    "name": "",
                    "type": "bytes32"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "approve",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_holder",
                    "type": "address"
                }
            ],
            "name": "balanceOf",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "id",
                    "type": "uint256"
                }
            ],
            "name": "burn",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "curator",
            "outputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "getApproved",
            "outputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_user",
                    "type": "address"
                }
            ],
            "name": "getStats",
            "outputs": [
                {
                    "internalType": "uint256[]",
                    "name": "",
                    "type": "uint256[]"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_owner",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "_operator",
                    "type": "address"
                }
            ],
            "name": "isApprovedForAll",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "i",
                    "type": "uint256"
                }
            ],
            "name": "mint",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "name",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_operator",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "_from",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                },
                {
                    "internalType": "bytes",
                    "name": "_data",
                    "type": "bytes"
                }
            ],
            "name": "onERC721Received",
            "outputs": [
                {
                    "internalType": "bytes4",
                    "name": "",
                    "type": "bytes4"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "ownerOf",
            "outputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "id",
                    "type": "uint256"
                }
            ],
            "name": "restore",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_from",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "_to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "safeTransferFrom",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_from",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "_to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                },
                {
                    "internalType": "bytes",
                    "name": "_data",
                    "type": "bytes"
                }
            ],
            "name": "safeTransferFrom",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_operator",
                    "type": "address"
                },
                {
                    "internalType": "bool",
                    "name": "_approved",
                    "type": "bool"
                }
            ],
            "name": "setApprovalForAll",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "string",
                    "name": "_uri",
                    "type": "string"
                }
            ],
            "name": "setBaseURI",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_curator",
                    "type": "address"
                }
            ],
            "name": "setCurator",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "bytes4",
                    "name": "interfaceId",
                    "type": "bytes4"
                }
            ],
            "name": "supportsInterface",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "symbol",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "value",
                    "type": "uint256"
                }
            ],
            "name": "toString",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_index",
                    "type": "uint256"
                }
            ],
            "name": "tokenByIndex",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_owner",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_index",
                    "type": "uint256"
                }
            ],
            "name": "tokenOfOwnerByIndex",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "tokenURI",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "",
                    "type": "string"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "totalSupply",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_from",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "_to",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "_tokenId",
                    "type": "uint256"
                }
            ],
            "name": "transferFrom",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        }
    ];



    const TheDAOAddress = "0xbb9bc244d798123fde783fcc1c72d3bb8c189413";
    const TheDAOABI = [{
        "constant": true,
        "inputs": [{"name": "", "type": "uint256"}],
        "name": "proposals",
        "outputs": [{"name": "recipient", "type": "address"}, {
            "name": "amount",
            "type": "uint256"
        }, {"name": "description", "type": "string"}, {"name": "votingDeadline", "type": "uint256"}, {
            "name": "open",
            "type": "bool"
        }, {"name": "proposalPassed", "type": "bool"}, {
            "name": "proposalHash",
            "type": "bytes32"
        }, {"name": "proposalDeposit", "type": "uint256"}, {"name": "newCurator", "type": "bool"}, {
            "name": "yea",
            "type": "uint256"
        }, {"name": "nay", "type": "uint256"}, {"name": "creator", "type": "address"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_spender", "type": "address"}, {"name": "_amount", "type": "uint256"}],
        "name": "approve",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "minTokensToCreate",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "rewardAccount",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "daoCreator",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "totalSupply",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "divisor",
        "outputs": [{"name": "divisor", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "extraBalance",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_proposalID", "type": "uint256"}, {"name": "_transactionData", "type": "bytes"}],
        "name": "executeProposal",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_from", "type": "address"}, {"name": "_to", "type": "address"}, {
            "name": "_value",
            "type": "uint256"
        }],
        "name": "transferFrom",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "unblockMe",
        "outputs": [{"name": "", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "totalRewardToken",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "actualBalance",
        "outputs": [{"name": "_actualBalance", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "closingTime",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "", "type": "address"}],
        "name": "allowedRecipients",
        "outputs": [{"name": "", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_to", "type": "address"}, {"name": "_value", "type": "uint256"}],
        "name": "transferWithoutReward",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {"constant": false, "inputs": [], "name": "refund", "outputs": [], "type": "function"}, {
        "constant": false,
        "inputs": [{"name": "_recipient", "type": "address"}, {
            "name": "_amount",
            "type": "uint256"
        }, {"name": "_description", "type": "string"}, {
            "name": "_transactionData",
            "type": "bytes"
        }, {"name": "_debatingPeriod", "type": "uint256"}, {"name": "_newCurator", "type": "bool"}],
        "name": "newProposal",
        "outputs": [{"name": "_proposalID", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "", "type": "address"}],
        "name": "DAOpaidOut",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "minQuorumDivisor",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_newContract", "type": "address"}],
        "name": "newContract",
        "outputs": [],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "_owner", "type": "address"}],
        "name": "balanceOf",
        "outputs": [{"name": "balance", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_recipient", "type": "address"}, {"name": "_allowed", "type": "bool"}],
        "name": "changeAllowedRecipients",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "halveMinQuorum",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "", "type": "address"}],
        "name": "paidOut",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_proposalID", "type": "uint256"}, {"name": "_newCurator", "type": "address"}],
        "name": "splitDAO",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "DAOrewardAccount",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "proposalDeposit",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "numberOfProposals",
        "outputs": [{"name": "_numberOfProposals", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "lastTimeMinQuorumMet",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_toMembers", "type": "bool"}],
        "name": "retrieveDAOReward",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "receiveEther",
        "outputs": [{"name": "", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_to", "type": "address"}, {"name": "_value", "type": "uint256"}],
        "name": "transfer",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "isFueled",
        "outputs": [{"name": "", "type": "bool"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_tokenHolder", "type": "address"}],
        "name": "createTokenProxy",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "_proposalID", "type": "uint256"}],
        "name": "getNewDAOAddress",
        "outputs": [{"name": "_newDAO", "type": "address"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_proposalID", "type": "uint256"}, {"name": "_supportsProposal", "type": "bool"}],
        "name": "vote",
        "outputs": [{"name": "_voteID", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "getMyReward",
        "outputs": [{"name": "_success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "", "type": "address"}],
        "name": "rewardToken",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_from", "type": "address"}, {"name": "_to", "type": "address"}, {
            "name": "_value",
            "type": "uint256"
        }],
        "name": "transferFromWithoutReward",
        "outputs": [{"name": "success", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "_owner", "type": "address"}, {"name": "_spender", "type": "address"}],
        "name": "allowance",
        "outputs": [{"name": "remaining", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "_proposalDeposit", "type": "uint256"}],
        "name": "changeProposalDeposit",
        "outputs": [],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "", "type": "address"}],
        "name": "blocked",
        "outputs": [{"name": "", "type": "uint256"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "curator",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [{"name": "_proposalID", "type": "uint256"}, {
            "name": "_recipient",
            "type": "address"
        }, {"name": "_amount", "type": "uint256"}, {"name": "_transactionData", "type": "bytes"}],
        "name": "checkProposalCode",
        "outputs": [{"name": "_codeChecksOut", "type": "bool"}],
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "privateCreation",
        "outputs": [{"name": "", "type": "address"}],
        "type": "function"
    }, {
        "inputs": [{"name": "_curator", "type": "address"}, {
            "name": "_daoCreator",
            "type": "address"
        }, {"name": "_proposalDeposit", "type": "uint256"}, {
            "name": "_minTokensToCreate",
            "type": "uint256"
        }, {"name": "_closingTime", "type": "uint256"}, {"name": "_privateCreation", "type": "address"}],
        "type": "constructor"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "_from", "type": "address"}, {
            "indexed": true,
            "name": "_to",
            "type": "address"
        }, {"indexed": false, "name": "_amount", "type": "uint256"}],
        "name": "Transfer",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "_owner", "type": "address"}, {
            "indexed": true,
            "name": "_spender",
            "type": "address"
        }, {"indexed": false, "name": "_amount", "type": "uint256"}],
        "name": "Approval",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": false, "name": "value", "type": "uint256"}],
        "name": "FuelingToDate",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "to", "type": "address"}, {
            "indexed": false,
            "name": "amount",
            "type": "uint256"
        }],
        "name": "CreatedToken",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "to", "type": "address"}, {
            "indexed": false,
            "name": "value",
            "type": "uint256"
        }],
        "name": "Refund",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "proposalID", "type": "uint256"}, {
            "indexed": false,
            "name": "recipient",
            "type": "address"
        }, {"indexed": false, "name": "amount", "type": "uint256"}, {
            "indexed": false,
            "name": "newCurator",
            "type": "bool"
        }, {"indexed": false, "name": "description", "type": "string"}],
        "name": "ProposalAdded",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "proposalID", "type": "uint256"}, {
            "indexed": false,
            "name": "position",
            "type": "bool"
        }, {"indexed": true, "name": "voter", "type": "address"}],
        "name": "Voted",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "proposalID", "type": "uint256"}, {
            "indexed": false,
            "name": "result",
            "type": "bool"
        }, {"indexed": false, "name": "quorum", "type": "uint256"}],
        "name": "ProposalTallied",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "_newCurator", "type": "address"}],
        "name": "NewCurator",
        "type": "event"
    }, {
        "anonymous": false,
        "inputs": [{"indexed": true, "name": "_recipient", "type": "address"}, {
            "indexed": false,
            "name": "_allowed",
            "type": "bool"
        }],
        "name": "AllowedRecipientChanged",
        "type": "event"
    }];

    let nftBytecode = "0x60c06040523480156200001157600080fd5b5060405162004e0b38038062004e0b833981810160405281019062000037919062000130565b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff1660a08173ffffffffffffffffffffffffffffffffffffffff1660601b8152505080600360003073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555080608081815250505050620001e3565b6000815190506200011381620001af565b92915050565b6000815190506200012a81620001c9565b92915050565b600080604083850312156200014457600080fd5b6000620001548582860162000102565b9250506020620001678582860162000119565b9150509250929050565b60006200017e8262000185565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b620001ba8162000171565b8114620001c657600080fd5b50565b620001d481620001a5565b8114620001e057600080fd5b50565b60805160a05160601c614b7a620002916000396000818161174901528181611dc001528181611eb5015281816121a301528181612a2f01528181612b1e0152612cb00152600081816107d50152818161087201528181610a7c01528181610bf401528181610fac015281816112980152818161184f0152818161199a015281816120620152818161208f0152818161214101528181612175015281816125b70152612df90152614b7a6000f3fe608060405234801561001057600080fd5b50600436106101a95760003560e01c80636352211e116100f9578063a23bfe9311610097578063c87b56dd11610071578063c87b56dd146104f0578063e66f53b714610520578063e90956cf1461053e578063e985e9c51461055a576101a9565b8063a23bfe9314610486578063b88d4fde146104a4578063c23f85d6146104c0576101a9565b806395d89b41116100d357806395d89b41146104145780639bea62ad14610432578063a0712d681461044e578063a22cb4651461046a576101a9565b80636352211e146103845780636900a3ae146103b457806370a08231146103e4576101a9565b806323b872dd1161016657806342842e0e1161014057806342842e0e1461030057806342966c681461031c5780634f6ccce71461033857806355f804b314610368576101a9565b806323b872dd146102965780632f745c59146102b2578063409d01df146102e2576101a9565b806301ffc9a7146101ae57806306fdde03146101de578063081812fc146101fc578063095ea7b31461022c578063150b7a021461024857806318160ddd14610278575b600080fd5b6101c860048036038101906101c391906137e0565b61058a565b6040516101d59190613ea7565b60405180910390f35b6101e6610794565b6040516101f39190613edd565b60405180910390f35b61021660048036038101906102119190613873565b6107d1565b6040516102239190613d95565b60405180910390f35b6102466004803603810190610241919061377b565b610870565b005b610262600480360381019061025d91906136c4565b610a3b565b60405161026f9190613ec2565b60405180910390f35b610280610a78565b60405161028d919061419f565b60405180910390f35b6102b060048036038101906102ab9190613675565b610aa0565b005b6102cc60048036038101906102c7919061377b565b610fa8565b6040516102d9919061419f565b60405180910390f35b6102ea611128565b6040516102f79190613edd565b60405180910390f35b61031a60048036038101906103159190613675565b611144565b005b61033660048036038101906103319190613873565b6116a6565b005b610352600480360381019061034d9190613873565b61184b565b60405161035f919061419f565b60405180910390f35b610382600480360381019061037d9190613832565b6118b7565b005b61039e60048036038101906103999190613873565b611996565b6040516103ab9190613d95565b60405180910390f35b6103ce60048036038101906103c99190613873565b611aab565b6040516103db9190613edd565b60405180910390f35b6103fe60048036038101906103f99190613610565b611c5b565b60405161040b919061419f565b60405180910390f35b61041c611cdd565b6040516104299190613edd565b60405180910390f35b61044c60048036038101906104479190613873565b611d1a565b005b61046860048036038101906104639190613873565b61201e565b005b610484600480360381019061047f919061373f565b6122db565b005b61048e612447565b60405161049b9190613edd565b60405180910390f35b6104be60048036038101906104b991906136c4565b612463565b005b6104da60048036038101906104d59190613610565b6129b7565b6040516104e79190613e85565b60405180910390f35b61050a60048036038101906105059190613873565b612df5565b6040516105179190613edd565b60405180910390f35b610528612f61565b6040516105359190613d95565b60405180910390f35b61055860048036038101906105539190613610565b612f85565b005b610574600480360381019061056f9190613639565b61308d565b6040516105819190613ea7565b60405180910390f35b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061065557507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806106bd57507f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061072557507f780e9d63000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061078d57507f150b7a02000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b60606040518060400160405280600a81526020017f54686544414f204e465400000000000000000000000000000000000000000000815250905090565b60007f00000000000000000000000000000000000000000000000000000000000000008210610835576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082c9061401f565b60405180910390fd5b6005600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b7f000000000000000000000000000000000000000000000000000000000000000081106108d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c99061401f565b60405180910390fd5b60006004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690503373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16148061094a5750610949813361308d565b5b610989576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161098090613eff565b60405180910390fd5b826005600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550818373ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4505050565b60006040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a6f9061403f565b60405180910390fd5b60007f0000000000000000000000000000000000000000000000000000000000000000905090565b816274eda073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610b13576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b0a9061407f565b60405180910390fd5b3073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610b82576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b7990613f7f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610bf2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be99061411f565b60405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000008210610c54576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c4b9061401f565b60405180910390fd5b60006004600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508473ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610cfa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cf190613fdf565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415610d6a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d6190613fbf565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610e2a5750600660008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b15610e3f57610e3a858585613121565b610fa1565b3373ffffffffffffffffffffffffffffffffffffffff166005600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610f655760006005600085815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4610f60858585613121565b610fa0565b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f97906140ff565b60405180910390fd5b5b5050505050565b60007f0000000000000000000000000000000000000000000000000000000000000000821061100c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110039061401f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561107c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110739061413f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff166004600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561111f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111169061409f565b60405180910390fd5b81905092915050565b604051806060016040528060408152602001614ac56040913981565b816274eda073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156111b7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111ae9061407f565b60405180910390fd5b3073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415611226576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161121d90613f7f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415611296576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161128d9061411f565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000082106112f8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112ef9061401f565b60405180910390fd5b60006004600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508473ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161461139e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161139590613fdf565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16141561140e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161140590613fbf565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806114ce5750600660008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b156114e3576114de858585613121565b611645565b3373ffffffffffffffffffffffffffffffffffffffff166005600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156116095760006005600085815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4611604858585613121565b611644565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163b906140ff565b60405180910390fd5b5b6116608585856040518060200160405280600081525061327d565b61169f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161169690613f1f565b60405180910390fd5b5050505050565b6004600082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611747576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161173e90613f3f565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33662386f26fc100006040518363ffffffff1660e01b81526004016117a9929190613e5c565b602060405180830381600087803b1580156117c357600080fd5b505af11580156117d7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117fb91906137b7565b156118485761180e336274eda083613121565b7fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5338260405161183f929190613e5c565b60405180910390a15b50565b60007f000000000000000000000000000000000000000000000000000000000000000082106118af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118a69061401f565b60405180910390fd5b819050919050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611945576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161193c906140df565b60405180910390fd5b806002908051906020019061195b92919061340a565b507f01e56a02aca7f26a28165a040851ba78f30282b55ca81c63a804cdc1e2dcea728160405161198b9190613edd565b60405180910390a150565b60007f000000000000000000000000000000000000000000000000000000000000000082106119fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119f19061401f565b60405180910390fd5b60006004600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415611aa2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a9990613fff565b60405180910390fd5b80915050919050565b6060600080831415611af5576040518060400160405280600181526020017f3000000000000000000000000000000000000000000000000000000000000000815250915050611c56565b6000601f90506000602067ffffffffffffffff811115611b3e577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280601f01601f191660200182016040528015611b705781602001600182028036833780820191505090505b5090505b60008514611c3157600a85611b899190614595565b6030611b9591906142bd565b60f81b818381518110611bd1577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a85611c0d9190614313565b9450600182611c1c919061439e565b91508280611c299061456b565b935050611b74565b60006020820151905080600885602003021b9050806020830152838252819450505050505b919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415611c9657600080fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606040518060400160405280600381526020017f44414f0000000000000000000000000000000000000000000000000000000000815250905090565b6004600082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166274eda073ffffffffffffffffffffffffffffffffffffffff1614611dbe576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611db59061415f565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166323b872dd3330662386f26fc100006040518463ffffffff1660e01b8152600401611e2293929190613dd9565b602060405180830381600087803b158015611e3c57600080fd5b505af1158015611e50573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e7491906137b7565b611eb3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611eaa90613f5f565b60405180910390fd5b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166323b872dd3360008054906101000a900473ffffffffffffffffffffffffffffffffffffffff166004662386f26fc10000611f259190614344565b6040518463ffffffff1660e01b8152600401611f4393929190613dd9565b602060405180830381600087803b158015611f5d57600080fd5b505af1158015611f71573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f9591906137b7565b611fd4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611fcb906140bf565b60405180910390fd5b611fe26274eda03383613121565b7f467e77758da9d784bae3ae341d63f385979a971050e7aba0b02e11b3c0a694fb3382604051612013929190613e5c565b60405180910390a150565b6000600360003073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020547f000000000000000000000000000000000000000000000000000000000000000061208b919061439e565b90507f000000000000000000000000000000000000000000000000000000000000000081106120ef576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016120e69061405f565b60405180910390fd5b600082118015612100575060648211155b61213f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016121369061417f565b60405180910390fd5b7f0000000000000000000000000000000000000000000000000000000000000000818361216c91906142bd565b11156121a157807f000000000000000000000000000000000000000000000000000000000000000061219e919061439e565b91505b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166323b872dd333085662386f26fc100006121f29190614344565b6040518463ffffffff1660e01b815260040161221093929190613dd9565b602060405180830381600087803b15801561222a57600080fd5b505af115801561223e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061226291906137b7565b156122d7575b60008211156122d65761227c303383613121565b7f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d412139688533826040516122ad929190613e5c565b60405180910390a181806122c090614495565b92505080806122ce90614522565b915050612268565b5b5050565b8173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561234a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161234190613f9f565b60405180910390fd5b80600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c318360405161243b9190613ea7565b60405180910390a35050565b604051806060016040528060408152602001614b056040913981565b826274eda073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156124d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016124cd9061407f565b60405180910390fd5b3073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415612545576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161253c90613f7f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156125b5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125ac9061411f565b60405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000008310612617576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161260e9061401f565b60405180910390fd5b60006004600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508573ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16146126bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016126b490613fdf565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16141561272d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161272490613fbf565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806127ed5750600660008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b15612802576127fd868686613121565b612964565b3373ffffffffffffffffffffffffffffffffffffffff166005600086815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156129285760006005600086815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555083600073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4612923868686613121565b612963565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161295a906140ff565b60405180910390fd5b5b6129708686868661327d565b6129af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016129a690613f1f565b60405180910390fd5b505050505050565b60606000600667ffffffffffffffff8111156129fc577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015612a2a5781602001602082028036833780820191505090505b5090507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231846040518263ffffffff1660e01b8152600401612a869190613d95565b60206040518083038186803b158015612a9e57600080fd5b505afa158015612ab2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612ad6919061389c565b81600081518110612b10577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010181815250507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e84306040518363ffffffff1660e01b8152600401612b77929190613db0565b60206040518083038186803b158015612b8f57600080fd5b505afa158015612ba3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612bc7919061389c565b81600181518110612c01577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050612c1630611c5b565b81600281518110612c50577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050612c686274eda0611c5b565b81600381518110612ca2577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010181815250507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401612d079190613d95565b60206040518083038186803b158015612d1f57600080fd5b505afa158015612d33573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612d57919061389c565b81600481518110612d91577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050612da683611c5b565b81600581518110612de0577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101818152505080915050919050565b60607f00000000000000000000000000000000000000000000000000000000000000008210612e59576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612e509061401f565b60405180910390fd5b600060028054612e68906144bf565b80601f0160208091040260200160405190810160405280929190818152602001828054612e94906144bf565b8015612ee15780601f10612eb657610100808354040283529160200191612ee1565b820191906000526020600020905b815481529060010190602001808311612ec457829003601f168201915b505050505090506000606484612ef79190614595565b90506000825111612f175760405180602001604052806000815250612f58565b81612f2d606486612f289190614313565b611aab565b612f3683611aab565b604051602001612f4893929190613d4e565b6040516020818303038152906040525b92505050919050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614613013576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161300a906140df565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f67af6fdde49010de3c6eef4c0f5e5d161ef161040b054cf5d13221b44d26619b816040516130829190613d95565b60405180910390a150565b6000600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600081548092919061317190614522565b9190505550600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008154809291906131c690614495565b9190505550816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b6000613288846133f7565b156133ea578373ffffffffffffffffffffffffffffffffffffffff1663150b7a02338786866040518563ffffffff1660e01b81526004016132cc9493929190613e10565b602060405180830381600087803b1580156132e657600080fd5b505af192505050801561331757506040513d601f19601f820116820180604052508101906133149190613809565b60015b61339a573d8060008114613347576040519150601f19603f3d011682016040523d82523d6000602084013e61334c565b606091505b50600081511415613392576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161338990613f1f565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506133ef565b600190505b949350505050565b600080823b905060008111915050919050565b828054613416906144bf565b90600052602060002090601f016020900481019282613438576000855561347f565b82601f1061345157805160ff191683800117855561347f565b8280016001018555821561347f579182015b8281111561347e578251825591602001919060010190613463565b5b50905061348c9190613490565b5090565b5b808211156134a9576000816000905550600101613491565b5090565b60006134c06134bb846141df565b6141ba565b9050828152602081018484840111156134d857600080fd5b6134e3848285614453565b509392505050565b60006134fe6134f984614210565b6141ba565b90508281526020810184848401111561351657600080fd5b613521848285614453565b509392505050565b60008135905061353881614a68565b92915050565b60008135905061354d81614a7f565b92915050565b60008151905061356281614a7f565b92915050565b60008135905061357781614a96565b92915050565b60008151905061358c81614a96565b92915050565b600082601f8301126135a357600080fd5b81356135b38482602086016134ad565b91505092915050565b600082601f8301126135cd57600080fd5b81356135dd8482602086016134eb565b91505092915050565b6000813590506135f581614aad565b92915050565b60008151905061360a81614aad565b92915050565b60006020828403121561362257600080fd5b600061363084828501613529565b91505092915050565b6000806040838503121561364c57600080fd5b600061365a85828601613529565b925050602061366b85828601613529565b9150509250929050565b60008060006060848603121561368a57600080fd5b600061369886828701613529565b93505060206136a986828701613529565b92505060406136ba868287016135e6565b9150509250925092565b600080600080608085870312156136da57600080fd5b60006136e887828801613529565b94505060206136f987828801613529565b935050604061370a878288016135e6565b925050606085013567ffffffffffffffff81111561372757600080fd5b61373387828801613592565b91505092959194509250565b6000806040838503121561375257600080fd5b600061376085828601613529565b92505060206137718582860161353e565b9150509250929050565b6000806040838503121561378e57600080fd5b600061379c85828601613529565b92505060206137ad858286016135e6565b9150509250929050565b6000602082840312156137c957600080fd5b60006137d784828501613553565b91505092915050565b6000602082840312156137f257600080fd5b600061380084828501613568565b91505092915050565b60006020828403121561381b57600080fd5b60006138298482850161357d565b91505092915050565b60006020828403121561384457600080fd5b600082013567ffffffffffffffff81111561385e57600080fd5b61386a848285016135bc565b91505092915050565b60006020828403121561388557600080fd5b6000613893848285016135e6565b91505092915050565b6000602082840312156138ae57600080fd5b60006138bc848285016135fb565b91505092915050565b60006138d18383613d30565b60208301905092915050565b6138e6816143d2565b82525050565b60006138f782614251565b613901818561427f565b935061390c83614241565b8060005b8381101561393d57815161392488826138c5565b975061392f83614272565b925050600181019050613910565b5085935050505092915050565b613953816143e4565b82525050565b613962816143f0565b82525050565b60006139738261425c565b61397d8185614290565b935061398d818560208601614462565b61399681614682565b840191505092915050565b60006139ac82614267565b6139b681856142a1565b93506139c6818560208601614462565b6139cf81614682565b840191505092915050565b60006139e582614267565b6139ef81856142b2565b93506139ff818560208601614462565b80840191505092915050565b6000613a18601a836142a1565b9150613a2382614693565b602082019050919050565b6000613a3b6032836142a1565b9150613a46826146bc565b604082019050919050565b6000613a5e6013836142a1565b9150613a698261470b565b602082019050919050565b6000613a816018836142a1565b9150613a8c82614734565b602082019050919050565b6000613aa46013836142a1565b9150613aaf8261475d565b602082019050919050565b6000613ac76004836142b2565b9150613ad282614786565b600482019050919050565b6000613aea6019836142a1565b9150613af5826147af565b602082019050919050565b6000613b0d6012836142a1565b9150613b18826147d8565b602082019050919050565b6000613b306013836142a1565b9150613b3b82614801565b602082019050919050565b6000613b53600b836142a1565b9150613b5e8261482a565b602082019050919050565b6000613b766012836142a1565b9150613b8182614853565b602082019050919050565b6000613b996004836142a1565b9150613ba48261487c565b602082019050919050565b6000613bbc6010836142a1565b9150613bc7826148a5565b602082019050919050565b6000613bdf601b836142a1565b9150613bea826148ce565b602082019050919050565b6000613c026012836142a1565b9150613c0d826148f7565b602082019050919050565b6000613c256014836142a1565b9150613c3082614920565b602082019050919050565b6000613c48601a836142a1565b9150613c5382614949565b602082019050919050565b6000613c6b600d836142a1565b9150613c7682614972565b602082019050919050565b6000613c8e6011836142a1565b9150613c998261499b565b602082019050919050565b6000613cb1600f836142a1565b9150613cbc826149c4565b602082019050919050565b6000613cd46001836142b2565b9150613cdf826149ed565b600182019050919050565b6000613cf7600c836142a1565b9150613d0282614a16565b602082019050919050565b6000613d1a6019836142a1565b9150613d2582614a3f565b602082019050919050565b613d398161443c565b82525050565b613d488161443c565b82525050565b6000613d5a82866139da565b9150613d6682856139da565b9150613d7182613cc7565b9150613d7d82846139da565b9150613d8882613aba565b9150819050949350505050565b6000602082019050613daa60008301846138dd565b92915050565b6000604082019050613dc560008301856138dd565b613dd260208301846138dd565b9392505050565b6000606082019050613dee60008301866138dd565b613dfb60208301856138dd565b613e086040830184613d3f565b949350505050565b6000608082019050613e2560008301876138dd565b613e3260208301866138dd565b613e3f6040830185613d3f565b8181036060830152613e518184613968565b905095945050505050565b6000604082019050613e7160008301856138dd565b613e7e6020830184613d3f565b9392505050565b60006020820190508181036000830152613e9f81846138ec565b905092915050565b6000602082019050613ebc600083018461394a565b92915050565b6000602082019050613ed76000830184613959565b92915050565b60006020820190508181036000830152613ef781846139a1565b905092915050565b60006020820190508181036000830152613f1881613a0b565b9050919050565b60006020820190508181036000830152613f3881613a2e565b9050919050565b60006020820190508181036000830152613f5881613a51565b9050919050565b60006020820190508181036000830152613f7881613a74565b9050919050565b60006020820190508181036000830152613f9881613a97565b9050919050565b60006020820190508181036000830152613fb881613add565b9050919050565b60006020820190508181036000830152613fd881613b00565b9050919050565b60006020820190508181036000830152613ff881613b23565b9050919050565b6000602082019050818103600083015261401881613b46565b9050919050565b6000602082019050818103600083015261403881613b69565b9050919050565b6000602082019050818103600083015261405881613b8c565b9050919050565b6000602082019050818103600083015261407881613baf565b9050919050565b6000602082019050818103600083015261409881613bd2565b9050919050565b600060208201905081810360008301526140b881613bf5565b9050919050565b600060208201905081810360008301526140d881613c18565b9050919050565b600060208201905081810360008301526140f881613c3b565b9050919050565b6000602082019050818103600083015261411881613c5e565b9050919050565b6000602082019050818103600083015261413881613c81565b9050919050565b6000602082019050818103600083015261415881613ca4565b9050919050565b6000602082019050818103600083015261417881613cea565b9050919050565b6000602082019050818103600083015261419881613d0d565b9050919050565b60006020820190506141b46000830184613d3f565b92915050565b60006141c46141d5565b90506141d082826144f1565b919050565b6000604051905090565b600067ffffffffffffffff8211156141fa576141f9614653565b5b61420382614682565b9050602081019050919050565b600067ffffffffffffffff82111561422b5761422a614653565b5b61423482614682565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60006142c88261443c565b91506142d38361443c565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115614308576143076145c6565b5b828201905092915050565b600061431e8261443c565b91506143298361443c565b925082614339576143386145f5565b5b828204905092915050565b600061434f8261443c565b915061435a8361443c565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615614393576143926145c6565b5b828202905092915050565b60006143a98261443c565b91506143b48361443c565b9250828210156143c7576143c66145c6565b5b828203905092915050565b60006143dd8261441c565b9050919050565b60008115159050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b83811015614480578082015181840152602081019050614465565b8381111561448f576000848401525b50505050565b60006144a08261443c565b915060008214156144b4576144b36145c6565b5b600182039050919050565b600060028204905060018216806144d757607f821691505b602082108114156144eb576144ea614624565b5b50919050565b6144fa82614682565b810181811067ffffffffffffffff8211171561451957614518614653565b5b80604052505050565b600061452d8261443c565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156145605761455f6145c6565b5b600182019050919050565b600061457682614446565b915060ff82141561458a576145896145c6565b5b600182019050919050565b60006145a08261443c565b91506145ab8361443c565b9250826145bb576145ba6145f5565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f616374696f6e206e6f7420746f6b656e207065726d6974746564000000000000600082015250565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b7f6f6e6c79206f776e65722063616e206275726e00000000000000000000000000600082015250565b7f44414f206465706f73697420696e73756666696369656e740000000000000000600082015250565b7f63616e6e6f742073656e6420746f2073656c6600000000000000000000000000600082015250565b7f2e706e6700000000000000000000000000000000000000000000000000000000600082015250565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b7f5f746f206d6f7374206e6f742062652030780000000000000000000000000000600082015250565b7f5f66726f6d206d757374206265206f776e657200000000000000000000000000600082015250565b7f6e6f74206d696e7465642e000000000000000000000000000000000000000000600082015250565b7f696e646578206f7574206f662072616e67650000000000000000000000000000600082015250565b7f6e6f706500000000000000000000000000000000000000000000000000000000600082015250565b7f6d696e74696e672066696e697368656400000000000000000000000000000000600082015250565b7f63616e6e6f742073656e6420746f206465616420616464726573730000000000600082015250565b7f746f6b656e206e6f742061737369676e65640000000000000000000000000000600082015250565b7f44414f2066656520696e73756666696369656e74000000000000000000000000600082015250565b7f6f6e6c792063757261746f722063616e2063616c6c2074686973000000000000600082015250565b7f6e6f74207065726d697474656400000000000000000000000000000000000000600082015250565b7f63616e6e6f742073656e6420746f203078000000000000000000000000000000600082015250565b7f6164647265737320696e76616c69640000000000000000000000000000000000600082015250565b7f2f00000000000000000000000000000000000000000000000000000000000000600082015250565b7f6d75737420626520646561640000000000000000000000000000000000000000600082015250565b7f6d757374206265206265747765656e203120616e642031303000000000000000600082015250565b614a71816143d2565b8114614a7c57600080fd5b50565b614a88816143e4565b8114614a9357600080fd5b50565b614a9f816143f0565b8114614aaa57600080fd5b50565b614ab68161443c565b8114614ac157600080fd5b5056fe3730363132656336396330323433346663343162386165613462623237353836323261323635323763373833336162333330636137666435396464343863623436633961653034316239623936303364613031643061613464393132353836633864383562396665313933326335376639383864386264306639646133626337a26469706673582212204fd37a928ea6e2981630a9bb98020bb9b4912636c2d2f56b4bb7cf01eadb885964736f6c63430008040033";

    let web3 = new Web3;
    let NFT;
    let TheDAO;
    let provider;
    let Web3Modal;

    let feth = function (v) { // stub function
        return "NaN"
    }; // format ETH (WEI to ETH)
    let peth = function (v) { // stub function
        return web3.utils.toBN("0");
    }; // parse ETH (ETH to WEI) return as BigNumber
    let toBN = function (str) { // stub function
        return new web3.utils.toBN(str);
    }; // convert to BigNumber
    let state = {
        isConnected: false,
        selectedAccount: "",
        web3BlockSub: null, // subscription to block updates
        balanceETH: toBN("0"),
        stats: {
            theDAOBalance : toBN("0"),
            theDAOAllowance: toBN("0"),
            NFTsToBeMinted : toBN("0"),
            NFTDeadBalance: toBN("0"),
            theDAOTotalWrapped: toBN("0"),
            NFTBalance: toBN("0")

        },
        bloom: ""
    };

    async function init() {
        web3 = new Web3(provider);
        NFT = new web3.eth.Contract(TheDaoNFTABI, TheDaoNFTAddress); // TheToken
        TheDAO = new web3.eth.Contract(TheDAOABI, TheDAOAddress); // TheDAO contract
        feth = function (wei) { // format ETH utility
            let ret = Web3.utils.fromWei(wei, 'ether');
            return ret;
        }
        peth = function (eth) {
            return web3.utils.toBN(Web3.utils.toWei(eth, 'ether'));
        }
        toBN = function (str) {
            return web3.utils.toBN(str);
        }
    }

    async function updateState(blockHeader) {

        let accounts = await web3.eth.getAccounts();
        state.selectedAccount = accounts[0];
        web3.eth.defaultAccount = state.selectedAccount;
        console.log("selected account" + state.selectedAccount);
        if (blockHeader) {
            state.bloom = blockHeader.logsBloom;
            state.balanceETH = await web3.eth.getBalance(state.selectedAccount);
            try {
                let result = await NFT.methods.getStats(state.selectedAccount).call();
                state.stats.theDAOBalance = toBN(result["0"][0]);
                state.stats.theDAOAllowance = toBN(result["0"][0]);
                state.stats.NFTsToBeMinted = toBN(result["0"][0]);
                state.stats.NFTDeadBalance = toBN(result["0"][0]);
                state.stats.theDAOTotalWrapped = toBN(result["0"][0]);
                state.stats.NFTBalance = toBN(result["0"][0]);
            } catch (e) {
                console.log(e);
            }
        }

    }

    function render() {
        let button = $("#connect");
        if ((!state.isConnected) && (state.selectedAccount.length !== 0)) {
            button.text("Connect Wallet");
            button.addClass("btn-primary");
            button.removeClass("btn-secondary");
        } else {
            let ac = state.selectedAccount
            let shortAc = ac.substring(0, 4) + '...' + ac.substring(ac.length - 4) + " connected";

            button.text(shortAc)
            button.removeClass("btn-primary");
            button.addClass("btn-secondary");

        }
    }

    $(async function () {
        console.log("ready!");

        Web3Modal = window.Web3Modal.default;
        const WalletConnectProvider = window.WalletConnectProvider.default;
        const providerOptions = {
            /* See Provider Options Section */
            // infuraId: "",
            /*
            walletconnect: {
                package: WalletConnectProvider, // required
                options: {
                    infuraId: "35247c5aca8a416bb22a01e56ab022dc" // required
                }
            }
            */
        };
        const w3m = new Web3Modal({
            network: "mainnet", // optional
            cacheProvider: true, // optional
            providerOptions // required
        });
        if (w3m.cachedProvider) {
            try {
                provider = await w3m.connect();
                state.isConnected = true;
                await init();
            } catch (e) {
                w3m.clearCachedProvider();
                toastr.error(e.message, 'Error connecting to your wallet');
            }
        }

        $("#connect").click(async function () {
            try {
                provider = await w3m.connect();
                state.isConnected = true;
                await init();
                render();

            } catch (e) {
                console.log("Could not get a wallet connection", e);
                state.connectError = e
                console.log("connect err " + e.message);

            }
        });

        $('button[name=deploy-nft]').on('click', function (e) {
            e.preventDefault();
            console.log("deploy nft");
            let contract = new web3.eth.Contract(TheDaoNFTABI);
            contract.deploy({
                data: nftBytecode,
                arguments: [TheDAOAddress, web3.utils.numberToHex('1800')]

            }).send({
                from: state.selectedAccount,
            }).then(function (newContractInstance) {
                console.log("NFT deployed to: " + newContractInstance.options.address) // instance with the new contract address
                NFT = newContractInstance;
            });
        });
    });

</script>
</body>